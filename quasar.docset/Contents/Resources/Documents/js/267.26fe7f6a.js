(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[267],{7759:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("doc-page",{attrs:{title:"Handling Back Button",nav:t.nav}},[a("p",[t._v("When writing reusable code for building a mobile App and a website, it’s important to know how to handle the “Back” button. More specifically, how to manage buttons on your layout/page that should make your App’s “go back” to the previous page.")]),a("div",{staticClass:"doc-note doc-note--tip"},[a("p",{staticClass:"doc-note__title"},[t._v("TIP")]),a("p",[t._v("If you have no knowledge of "),a("doc-link",{attrs:{to:"http://router.vuejs.org/"}},[t._v("Vue Router")]),t._v(", we highly recommend you read and understand how it works first.")],1)]),a("h2",{staticClass:"doc-heading doc-h2",attrs:{id:"Cordova-Use-Case"},on:{click:function(e){return t.copyHeading("Cordova-Use-Case")}}},[t._v("Cordova Use Case")]),a("p",[t._v("Quasar handles the back button for you by default, so it can hide any opened Modals/Dialogs "),a("strong",[t._v("instead of the default behavior")]),t._v(" which is to return to the previous page (which is not a nice user experience).")]),a("p",[t._v("Also, when on the home route ("),a("code",{staticClass:"doc-token"},[t._v("/")]),t._v(") and user presses the back button on the phone/tablet, Quasar will make your app exit. Should you wish to disable this behavior, then you can do so by configuring quasar.conf.js:")]),a("pre",{pre:!0,attrs:{class:"doc-code language-js"}},[a("code",{pre:!0,attrs:{class:"doc-code__inner doc-code__inner--prerendered language-js"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  framework"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    config"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      cordova"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        backButtonExit"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),a("h2",{staticClass:"doc-heading doc-h2",attrs:{id:"Navigation-Scenario"},on:{click:function(e){return t.copyHeading("Navigation-Scenario")}}},[t._v("Navigation Scenario")]),a("p",[t._v("Consider this situation: We have an App with two pages (so two routes): a login page (route “/”) and another page with a list of items on multiple layout tabs - let’s call this page “List page” from now on, where each tab has a route like “/list/shoes”, “/list/hats”. The Login page redirects to List page and List page has a “Logout” button, which redirects the user to the Login page.")]),a("p",[t._v("How would you handle this situation? Normally, you’d write code like below for the Login and Logout button (we won’t go into details of handling the login information and communicating with a server as this is outside of the exercise here):")]),a("pre",{pre:!0,attrs:{class:"doc-code language-html"}},[a("code",{pre:!0,attrs:{class:"doc-code__inner doc-code__inner--prerendered language-html"}},[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- Login button --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("q-btn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("label")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Login"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- Logout button --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("q-btn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/login"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("label")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Logout"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])]),a("p",[t._v("Now you build your App and install it on a phone. You open up the App, hit login then logout, then the phone’s back button. What you most likely want is for your App to exit at this point… but it doesn’t! It goes to the “/list” route instead. It’s kind of obvious why. Web history builds up as you hit the buttons:")]),a("pre",{pre:!0,attrs:{class:"doc-code language-js"}},[a("code",{pre:!0,attrs:{class:"doc-code__inner doc-code__inner--prerendered language-js"}},[t._v("# Start App\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("history"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length is "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n\n# Hit Login button\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("history"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length is "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n\n# Hit Logout button\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("history"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length is "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n")])]),a("p",[t._v("What you’d like instead, is when you hit the Logout button, the "),a("code",{staticClass:"doc-token"},[t._v("window.history.length")]),t._v(" to be 1 again. Quasar can handle this automatically for you. Read about the "),a("code",{staticClass:"doc-token"},[t._v("v-go-back")]),t._v(" Vue directive.")]),a("h2",{staticClass:"doc-heading doc-h2",attrs:{id:"Directive-v-go-back"},on:{click:function(e){return t.copyHeading("Directive-v-go-back")}}},[t._v("Directive v-go-back")]),a("p",[t._v("Let’s rewrite the Logout button to act as we would actually want it to work, which is to make "),a("code",{staticClass:"doc-token"},[t._v("window.history.length")]),t._v(" be 1 again. We’re going to install the directive:")]),a("doc-installation",{attrs:{directives:"GoBack"}}),a("p",[t._v("Then we use it:")]),a("pre",{pre:!0,attrs:{class:"doc-code language-html"}},[a("code",{pre:!0,attrs:{class:"doc-code__inner doc-code__inner--prerendered language-html"}},[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- Logout button --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("q-btn")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-go-back")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("/' "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("color")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("primary"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("label")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Logout"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])]),a("p",[t._v("This directive determines if the Platform is Cordova, and if so, it performs a "),a("code",{staticClass:"doc-token"},[t._v("window.history.back()")]),t._v(" call instead of a "),a("code",{staticClass:"doc-token"},[t._v("$router.push('/')")]),t._v(".")]),a("h2",{staticClass:"doc-heading doc-h2",attrs:{id:"Quirks"},on:{click:function(e){return t.copyHeading("Quirks")}}},[t._v("Quirks")]),a("p",[t._v('Now you may think everything will work smoothly, but you must be careful about how your app is stacking up the window history. Remember, we started out by saying that the List page has a layout with multiple tabs, each one with its own route ("/list/shoes", “/list/hats”). If we’d use '),a("code",{staticClass:"doc-token"},[t._v('to="/list/shoes"')]),t._v(" and "),a("code",{staticClass:"doc-token"},[t._v('to="/list/hats"')]),t._v(" on your Tabs (read more about "),a("doc-link",{attrs:{to:"/vue-components/tabs"}},[t._v("QTabs")]),t._v("), then window history will build up when switching between the tabs.")],1),a("p",[t._v("This incorrect behavior for apps is due to Vue Router pushing routes to the history by default. What you’d like instead, is for your window history length to stay the same, even if routes change. Fortunately, Vue Router comes to the rescue with the "),a("code",{staticClass:"doc-token"},[t._v("replace")]),t._v(" property, which essentially replaces current route instead of pushing it as a new route.")]),a("p",[t._v("So, besides "),a("code",{staticClass:"doc-token"},[t._v('to="/some/route"')]),t._v(" you should add the "),a("code",{staticClass:"doc-token"},[t._v("replace")]),t._v(" attribute (becoming "),a("code",{staticClass:"doc-token"},[t._v('to="/some/route" replace')]),t._v("). This will replace the current route in the window history rather than pushing it.")]),a("p",[t._v("The same applies to "),a("code",{staticClass:"doc-token"},[t._v("<router-link>")]),t._v("s.")]),a("div",{staticClass:"doc-note doc-note--warning"},[a("p",{staticClass:"doc-note__title"},[t._v("WARNING")]),a("p",[t._v("Always "),a("strong",[t._v("think")]),t._v(" about how you redirect your App to a new route, depending on what you want to achieve. Think if you really want to push a new route to window history or if you want to “replace” the current route. Otherwise the phone/tablet/browser “Back” button won’t work quite as expected. Instead of finally exiting the App, it will make you go through all the routes in the reverse order they were visited. So when you hit back and go to the Login page, you’d expect another back to make the App exit, but it might make your App go to one of the List tabs, depending on the user’s navigation history.")])]),a("h2",{staticClass:"doc-heading doc-h2",attrs:{id:"GoBack-API"},on:{click:function(e){return t.copyHeading("GoBack-API")}}},[t._v("GoBack API")]),a("doc-api",{attrs:{file:"GoBack"}})],1)},o=[],n=a("8669"),r="Handling Back Button | Quasar Framework",i="How to manage the back button in a Quasar app.",c={meta:{title:"Handling Back Button",meta:{title:{name:"title",content:r},ogTitle:{name:"og:title",content:r},twitterTitle:{name:"twitter:title",content:r},description:{name:"description",content:i},ogDesc:{name:"og:description",content:i},twitterDesc:{name:"twitter:description",content:i}}},preFetch:function(t){var e=t.store;e.commit("updateToc",[{id:"Cordova-Use-Case",title:"Cordova Use Case"},{id:"Navigation-Scenario",title:"Navigation Scenario"},{id:"Directive-v-go-back",title:"Directive v-go-back"},{id:"Quirks",title:"Quirks"},{id:"GoBack-API",title:"GoBack API"}])},created:function(){this.nav=[{name:"Close Popup",category:"Vue Directives",path:"/vue-directives/close-popup",dir:"left"},{name:"Intersection",category:"Vue Directives",path:"/vue-directives/intersection",dir:"right"}]},methods:{copyHeading:n["a"]}},p=c,u=a("2877"),l=Object(u["a"])(p,s,o,!1,null,null,null);e["default"]=l.exports}}]);