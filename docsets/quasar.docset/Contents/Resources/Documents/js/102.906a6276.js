(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[102],{"0b9a":function(t,a,s){"use strict";s.r(a);var n=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("doc-page",{attrs:{title:"Managing Google Analytics",nav:t.nav}},[s("p",[t._v("Getting to know your users and measuring user behavior is an important step in App Development. Unfortunately, it takes a bit of non-standard work to get Google Analytics to work after wrapping your mobile app with Capacitor. Setting up Google Analytics in a pure web application is quite easy, but Capacitor somehow prevents pageviews and events from being sent to Google Analytics.")]),s("p",[t._v("Follow this guide to implement Google Analytics into your Capacitor powered Quasar App.")]),s("p",[t._v("You may also want to read this great tutorial: "),s("doc-link",{attrs:{to:"https://jannerantala.com/tutorials/quasar-framework-google-tag-manager-and-analytics-setup-for-an-spa-website/"}},[t._v("Google Tag Manager and Analytics Setup for an SPA Website")])],1),s("div",{staticClass:"doc-note doc-note--warning"},[s("p",{staticClass:"doc-note__title"},[t._v("WARNING")]),s("p",[t._v("You’ll need to include a "),s("code",{staticClass:"doc-token"},[t._v("<script>")]),t._v(" tag provided by Google in "),s("code",{staticClass:"doc-token"},[t._v("/src/index.template.html")]),t._v(", which will make your App depend on an Internet connection!")])]),s("h2",{staticClass:"doc-heading doc-h2",attrs:{id:"Prerequisites"},on:{click:function(a){return t.copyHeading("Prerequisites")}}},[t._v("Prerequisites")]),s("ul",[s("li",[t._v("Make sure all your routes have a name and path parameter specified. Otherwise, they cannot be posted to the "),s("code",{staticClass:"doc-token"},[t._v("ga.logPage")]),t._v(" function. Please refer to "),s("doc-link",{attrs:{to:"/quasar-cli/cli-documentation/routing"}},[t._v("Routing")]),t._v(" for more info on routing.")],1),s("li",[t._v("Have Basic knowledge of Google Analytics")])]),s("h2",{staticClass:"doc-heading doc-h2",attrs:{id:"Preparation"},on:{click:function(a){return t.copyHeading("Preparation")}}},[t._v("Preparation")]),s("p",[t._v("Before we can start implementing Google Analytics into your application, you’ll need an account for "),s("doc-link",{attrs:{to:"https://analytics.google.com"}},[t._v("Google Analytics")]),t._v(" and "),s("doc-link",{attrs:{to:"https://tagmanager.google.com/"}},[t._v("Google Tagmanager")]),t._v(". So let’s do that first. When you have these accounts, it’s time to configure Tag manager. Follow the steps in this "),s("doc-link",{attrs:{to:"http://www.multiminds.eu/2016/12/06/google-analytics-tag-manager-ionic-cordova/"}},[t._v("Multiminds article")]),t._v(" to do so.")],1),s("h2",{staticClass:"doc-heading doc-h2",attrs:{id:"Implementing-this-into-application"},on:{click:function(a){return t.copyHeading("Implementing-this-into-application")}}},[t._v("Implementing this into application")]),s("blockquote",{staticClass:"doc-note"},[s("p",[t._v("For this guide, we’ll assume you have a fixed sessionId that you send to Google Analytics. Google Analytics uses a sessionId to distinguish different users from each other. If you want to create an anonymous sessionId, see "),s("doc-link",{attrs:{to:"https://developers.google.com/analytics/devguides/collection/analyticsjs/cookies-user-id"}},[t._v("Analytics Documentation on user id")]),t._v(".")],1)]),s("p",[t._v("Place the Tag Manager snippet into head of your "),s("code",{staticClass:"doc-token"},[t._v("index.html")]),t._v(" file (if you’ve followed the "),s("doc-link",{attrs:{to:"http://www.multiminds.eu/2016/12/06/google-analytics-tag-manager-ionic-cordova/"}},[t._v("Multiminds article")]),t._v(", you already have this.) Create a new file in your codebase called "),s("code",{staticClass:"doc-token"},[t._v("analytics.js")]),t._v(" with the following contents:")],1),s("pre",{pre:!0,attrs:{class:"doc-code language-javascript"}},[s("code",{pre:!0,attrs:{class:"doc-code__inner doc-code__inner--prerendered language-javascript"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("logEvent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("category"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" action"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" label"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sessionId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    dataLayer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'appEventCategory'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" category"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'appEventAction'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" action"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'appEventLabel'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" label"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sessionId'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" sessionId\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    dataLayer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'event'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'appEvent'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("logPage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sessionId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    dataLayer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'screenPath'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'screenName'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sessionId'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" sessionId\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    dataLayer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'event'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'appScreenView'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),s("p",[t._v("To make sure all the pages in your application are automatically posted to Google Analytics, we create an app boot file:")]),s("pre",{pre:!0,attrs:{class:"doc-code language-bash"}},[s("code",{pre:!0,attrs:{class:"doc-code__inner doc-code__inner--prerendered language-bash"}},[t._v("$ quasar new boot google-analytics\n")])]),s("p",[t._v("Then we edit the newly created file: "),s("code",{staticClass:"doc-token"},[t._v("/src/boot/google-analytics.js")]),t._v(":")]),s("pre",{pre:!0,attrs:{class:"doc-code language-js"}},[s("code",{pre:!0,attrs:{class:"doc-code__inner doc-code__inner--prerendered language-js"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ga "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'analytics.js'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" router "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  router"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("afterEach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("to"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    ga"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("logPage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("to"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" to"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sessionId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),s("p",[t._v("Finally we register the app boot file in "),s("code",{staticClass:"doc-token"},[t._v("/quasar.conf.js")]),t._v(". We can do so only for Capacitor wrapped apps if we want:")]),s("pre",{pre:!0,attrs:{class:"doc-code language-js"}},[s("code",{pre:!0,attrs:{class:"doc-code__inner doc-code__inner--prerendered language-js"}},[t._v("boot"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  ctx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("capacitor "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'google-analytics'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),s("p",[t._v("More information about events can be found in the "),s("doc-link",{attrs:{to:"https://developers.google.com/analytics/devguides/collection/analyticsjs/events"}},[t._v("Analytics documentation on events")]),t._v(".")],1),s("p",[t._v("You’ll see the events and pageviews coming in when you run your app. It usually takes around 5 to 10 seconds for a pageview to be registered in the realtime view.")])])},e=[],o=s("8669"),r="Managing Google Analytics | Quasar Framework",p="How to use analytics in a Quasar hybrid mobile app with Capacitor.",c={meta:{title:"Managing Google Analytics",meta:{title:{name:"title",content:r},ogTitle:{name:"og:title",content:r},twitterTitle:{name:"twitter:title",content:r},description:{name:"description",content:p},ogDesc:{name:"og:description",content:p},twitterDesc:{name:"twitter:description",content:p}}},preFetch:function(t){var a=t.store;a.commit("updateToc",[{id:"Prerequisites",title:"Prerequisites"},{id:"Preparation",title:"Preparation"},{id:"Implementing-this-into-application",title:"Implementing this into application"}])},created:function(){this.nav=[{name:"Troubleshooting and Tips",category:"Developing Capacitor Apps",path:"/quasar-cli/developing-capacitor-apps/troubleshooting-and-tips",dir:"left"},{name:"Publishing to Store",category:"Developing Capacitor Apps",path:"/quasar-cli/developing-capacitor-apps/publishing-to-store",dir:"right"}]},methods:{copyHeading:o["a"]}},i=c,l=s("2877"),v=Object(l["a"])(i,n,e,!1,null,null,null);a["default"]=v.exports}}]);